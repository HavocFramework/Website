# 3. Profiles

The Havoc Yaotl configuration language is a configuration file that contains everything that the teamserver needs to run. 
Yaotl is a fork of the popular configuration language [HCL](https://github.com/hashicorp/hcl). 

### Syntax
Blah blah blah show on how to use the syntax like blocks, strings, integers, and arrays

### The `Teamserver` block
The `Teamserver` block holds the necessary information to bind the teamserver on a host and port where it is going to listen and accept client connections. 
`Host` is a string field that expects an ip/host address. This field is required.
`Port` is a integer field that expects an port to bind on. This field is required.
Both Host and Port are required to be specified. Those values are going to be used to listen and accept incoming client connections. 
Example:

```hcl
Teamserver {
	Host = "0.0.0.0"
	Port = 40056
}
```

<br>

The `Teamserver` block also has an sub block called `Build` where you can specify the compiler to use for compiling C and assembly files. If this block is not specified then the teamserver is going to search and use the avaliable mingw cross compiler (`x86_64-w64-mingw32-gcc` and `i686-w64-mingw32-gcc`). If the teamserver doesn't find the mingw/nasm compiler on the system and from the profile then its going to exit. 
Example: 
```hcl
Teamserver {
	Host = "0.0.0.0"
	Port = 40056

	Build {
		Compiler64 = "/usr/bin/x86_64-w64-mingw32-gcc"
		Compiler86 = "/usr/bin/i686-w64-mingw32-gcc"
		Nasm 	   = "/usr/bin/nasm"
	}
}
```

### The `Operators` block
The `Operators` block specifies the users that are going to be allowed to connect and interact with the teamserver. To add a new user you only need to specify the username and password. 
Example User Block:
```hcl
user "MyUsername" {
	password = "MyPassword" 
}
```
Example Operator Block: 
```hcl
Operators {
	user "5pider" {
		Password = "password1234"
	}

	user "Neo" {
		Password = "password1234"
	}
}
```

### The `Listeners` block
The `Listeners` block allowes the operator to start a listener without doing it manually in the client interface. 

This block has the following sub blocks `Http` and `Smb` that allows to start a listener with the desired protocol. 

&nbsp;

The `Http` block allows to configure and start a Http/Https listener. Following fields can be configured.

| Field	  | Type | Description | Required  
|---------|------|------|----------
| `Name`  | string | listener name | true
| `Hosts` | string array | takes an array of hosts/ip strings. Those values can be formated as following: `host:port` (example: `host.com:443`) to set the host and port to connect to or simply `host` (example: `host.com`) to connect to. If only the host has been specified then the binded port is going to be used. If no hosts where specified then the binded host and port is going be used. | false
| `Port`  | int | where the listener should to bind on | true
| `HostBind` | string | where the listener should to bind on | true
| `HostRotation` | string | host rotation technique to use from `random` (randomly select a host name from list) and `round-robin` (loop through the list of host names in the order they are provided) | true
| `UserAgent`  | string | What user agent can/should be used | true
| `Headers`  | string array | What headers can/should be used. if nothing is provided then the listener is going to use `Content-type: */*`. Or else the agent wont be able to callback. | false
| `Uris`  | string array | what uri's to use. if nothing provided then the listener is going to use `/`. | false
| `Secure` | bool | if SSL should be used or not (HTTPs). | true
| `Response` | block | how should the listener responde to the agent request | false

&nbsp;

Avaliable fields/values for the `Response` block:

| Field	  | Type | Description | Required  
|---------|------|------|----------
| `Headers`| string | use the specified headers to respond to every request. | false

&nbsp;

Example Http/s lisener configuration:
```hcl
Listeners {
    Http {
        Name         = "Agent Listener - HTTP/s"
        Hosts        = [
            "5pider.dev", 
            "havocframework.com:8080"
        ]
        HostBind     = "0.0.0.0"
        Port         = 443
        HostRotation = "round-robin"
        Secure       = true
        UserAgent    = "Mozilla/5.0 (Windows NT 6.1; WOW64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/96.0.4664.110 Safari/537.36"

        Uris = [
            "/funny_cat.gif",
            "/index.php",
            "/test.txt",
            "/helloworld.js"
        ]

        Headers = [
            "Content-type: text/plain",
            "X-Havoc: true",
            "X-Havoc-Agent: Demon",
        ]

        Response {
            Headers = [
                "Content-type: text/plain",
                "X-IsHavocFramework: true",
            ]
        }
    }
}
```

### The `Demon` block

### The `Service` block

### The `Webhook` block
